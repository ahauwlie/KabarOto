<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <title>KabarOto</title>
        <link rel="stylesheet" type="text/css" href="styles/style.css">
		<link rel="stylesheet" type="text/css" href="fonts/css/fontawesome-all.min.css">
		<link rel="stylesheet" type="text/css" href="styles/framework.css">
		<link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
    </head>
    <body>
    	<div id="page-transitions" class="page-build highlight-red">
			
			<div class="page-content header-clear">
				<div class="news-home">
					<div class="news-tabs bg-white">
						<a href="#" data-tab="news-tab-1" class="one-third center-text active-tab-button">Lists</a>
						<div class="clear"></div>
					</div>
					<div class="news-tabs-content">
						<div class="tab-item active-tab" id="news-tab-1">
							<div class="content">
								<div id="mydiv"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="decoration decoration-margins"></div>
			</div>
		</div>
		<script type="text/javascript" src="scripts/jquery.js"></script>
		<script type="text/javascript">
       		const request = new XMLHttpRequest();
     
		    request.open('GET', 'https://adm982.kabaroto.com/api/post/?page=1&rpp=20');
		    request.send(); 
		     
		    request.onload = () => {
		      if (request.status === 200) {
		        console.log("Success");

		        //deklarasi data
		        var _this = this;
		        this.test = [];
		        var grid = [];
		        var data = [];
		        var res = JSON.parse(request.response);
		        for(var i=0;i<res.data.length;i++){

		        	// buat kecilin resolusi cover
		         	var my = res.data[i].cover, replacement = '_160x160.';
        			var str = my.replace(/.([^.]*)$/,replacement+'$1');
        			res.data[i].coverlite =  str;

        			var cover = res.data[i].coverlite;
		        	var date = res.data[i].published;
		        	var id = res.data[i].id;
		        	var title = res.data[i].title;


			        // buat UI yang di tampilin ke html
			        var table="<div class='news-list-item'>";
			      	table+="<a href='#'>"; 
			      	table+="<img src='"+cover+"'>";
			      	table+="<strong>"+title+"</strong>";
			      	table+="</a>";
			      	table+="<span><i class='fas fa-clock'></i>" + date + "<a href='#' class='color-highlight'>Technology</a></span>";
			      	table+="</div>";

				    //panggil ke <div id="mydiv">
				    $("#mydiv").append(table); 
			    }
			    
		      } 
		    };
		     
		    request.onerror = () => {
		      console.log("error")
		    };
		</script>
		<script type="text/javascript" src="scripts/plugins.js"></script>
		<script type="text/javascript" src="scripts/custom.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
    </body>
</html>
