<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <title>KabarOto</title>
        <link rel="stylesheet" type="text/css" href="styles/style.css">
		<link rel="stylesheet" type="text/css" href="fonts/css/fontawesome-all.min.css">
		<link rel="stylesheet" type="text/css" href="styles/framework.css">
		<link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
    </head>
    <body>
    	<div id="page-transitions" class="page-build highlight-red">
			
			<div class="page-content header-clear">
				<div class="news-home">
					<div class="news-tabs bg-white">
						<a href="#" data-tab="news-tab-1" class="one-third center-text active-tab-button">Lists</a>
						<div class="clear"></div>
					</div>
					<div class="news-tabs-content">
						<div class="tab-item active-tab" id="news-tab-1">
							<div class="content">
								<div id="mydiv"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="decoration decoration-margins"></div>
			</div>
		</div>
		<script type="text/javascript" src="scripts/jquery.js"></script>
		<!-- <script>
			var obj=[
		        {
		            id : "001",
		            name : "apple",
		            category : "fruit",
		            color : "images/pictures/5s.jpg"
		        },
		        {
		            id : "002",
		            name : "melon",
		            category : "fruit",
		            color : "images/pictures/7s.jpg"
		        },
		        {
		            id : "003",
		            name : "banana",
		            category : "fruit",
		            color : "images/pictures/3s.jpg"
		        }
		    ]
		    // var tbl=$("<table/>").attr("id","mytable");
		    // $("#div1").append(tbl);
		    for(var i=0;i<3;i++)
		    {
		        var tr1="<div class='news-list-item'>";
		        var tr="<a href='#'>";
				var td1="<img src='"+obj[i]["color"]+"'>";
				var td2="<strong>"+obj[i]["name"]+"</strong>";
				var td3="</a>";
				var td4="<span><i class='fas fa-clock'></i>30 Dec 2019 <a href='#' class='color-highlight'>Technology</a></span>";
				var td5="</div>"

		       $("#mydiv").append(tr1+tr+td1+td2+td3+td4+td5); 

		    } 
		</script> -->



		<!-- <script>
			var xmlhttp = new XMLHttpRequest();
			var url = "text.txt";

			xmlhttp.onreadystatechange = function() {
			  if (this.readyState == 4 && this.status == 200) {
			    var myArr = JSON.parse(this.responseText);
			    myFunction(myArr);
			  }
			};
			
			xmlhttp.open("GET", url, true);
			xmlhttp.send();

			function myFunction(arr) {
			  var out = "";
			  var i;
			  var we = [];
			  for(i = 0; i < arr.length; i++) {
			    out += '<a href="' + arr[i].teitle + '">' + 
    			arr[i].we[0].qe + '</a><br>';
			  }
			  document.getElementById("id01").innerHTML = out;
			}
		</script> -->


		<script type="text/javascript">
       		const request = new XMLHttpRequest();
     
		    request.open('GET', 'https://adm982.kabaroto.com/api/post/?page=1&rpp=20');
		    request.send(); 
		     
		    request.onload = () => {
		      if (request.status === 200) {
		        console.log("Success"); // So extract data from json and create table
		        
		        //Extracting data
		        var _this = this;
		        this.test = [];
		        var grid = [];
		        var data = [];
		        var res = JSON.parse(request.response);
		        for(var i=0;i<res.data.length;i++){
			        
			        // var cover = res.data[i].cover;
		         //  	var newchar = '_300x200.';
		         //  	_this.test = cover.split(/.([^.]*)$/).join(newchar);
		         	var cover = res.data[i].cover;
		          	var newchar = '_300x200.';
		          	_this.test = cover.split(/.([^.]*)$/).join(newchar);
		          	
		          	// _this.test = cover.replace(/.([^.]*)$/.join(newchar);
		          	console.log(_this.test);

		          	// /.([^.]*)$/

		        	var date = res.data[i].published;
		        	var id = res.data[i].id;
		        	var title = res.data[i].title;


			        // Creating table
			        var table="<div class='news-list-item'>";
			      	table+="<a href='#'>"; 
			      	table+="<img src='"+cover+"'>";
			      	table+="<strong>"+title+"</strong>";
			      	table+="</a>";
			      	table+="<span><i class='fas fa-clock'></i>" + date + "<a href='#' class='color-highlight'>Technology</a></span>";
			      	table+="</div>";

				    //Showing the table inside table
				    $("#mydiv").append(table); 
			    }
			    
		      } 
		    };
		     
		    request.onerror = () => {
		      console.log("error")
		    };
		</script>
		<script type="text/javascript" src="scripts/plugins.js"></script>
		<script type="text/javascript" src="scripts/custom.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
    </body>
</html>
